  /index.html
/images/ghost.png
/images/mushroom.png
/images/butterfly.png
/images/snail.png
/images/firefly.png
/images/leaf.png
/images/fog.png
/images/web.png
/audio/bgMusic.mp3
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dreamy Mushroom Forest Adventure</title>
<style>
*{margin:0;padding:0;box-sizing:border-box;}
html,body{height:100%;overflow:hidden;background:#0b1a1e;font-family:sans-serif;}
#gameCanvas{position:relative;width:100vw;height:100vh;background:url('images/forestBackground.png') repeat-y;background-size:cover;overflow:hidden;touch-action:none;transition:background-color 5s;}
.ghost{position:absolute;width:80px;height:80px;background:url('images/ghost.png') no-repeat center/contain;z-index:10;transition:transform 0.2s, filter 0.5s;filter:drop-shadow(0 0 12px #a0f0ff);}
.mushroom,.creature,.flower,.leaf,.particle,.collectible,.obstacle,.web,.fog{position:absolute;background-size:contain;background-repeat:no-repeat;}
.mushroom{width:60px;height:60px;filter:drop-shadow(0 0 12px #a0f0ff);}
.flower{width:40px;height:40px;}
.creature{width:40px;height:40px;transition: transform 0.5s;}
.leaf{width:20px;height:20px;transition:transform 1s;}
.particle{width:5px;height:5px;border-radius:50%;background:white;opacity:0.7;pointer-events:none;filter:drop-shadow(0 0 6px white);}
.collectible{width:30px;height:30px;filter:drop-shadow(0 0 15px #ffffaa);}
.obstacle{width:40px;height:40px;}
.web{width:30px;height:30px;opacity:0.3;}
.fog{width:100px;height:60px;opacity:0.2;background:linear-gradient(180deg,rgba(255,255,255,0.1),rgba(255,255,255,0));border-radius:50%;}
#scoreBoard{position:absolute;top:10px;left:10px;color:white;font-size:20px;z-index:20;}
#musicBtn{position:absolute;top:10px;right:10px;padding:8px 12px;background:rgba(255,255,255,0.7);border-radius:8px;display:block;z-index:20;}
</style>
</head>
<body>
<div id="gameCanvas"></div>
<div class="ghost" id="ghost"></div>
<div id="scoreBoard">Score: 0</div>
<button id="musicBtn">Change Music</button>
<audio id="bgMusic" src="audio/bgMusic.mp3" loop autoplay></audio>

<script>
const canvas=document.getElementById('gameCanvas');
const ghost=document.getElementById('ghost');
const bgMusic=document.getElementById('bgMusic');
const musicBtn=document.getElementById('musicBtn');
const scoreBoard=document.getElementById('scoreBoard');

let ghostPos={x:window.innerWidth/2-40,y:window.innerHeight/2-40};
let dragging=false;
let offset={x:0,y:0};
let score=localStorage.getItem('forestScore')?parseInt(localStorage.getItem('forestScore')):0;
scoreBoard.innerText='Score: '+score;
let time=0;

// Ghost drag
function startDrag(e){dragging=true;const t=e.touches?e.touches[0]:e;offset.x=t.clientX-ghostPos.x;offset.y=t.clientY-ghostPos.y;}
function stopDrag(){dragging=false;}
function moveGhost(e){if(!dragging)return;const t=e.touches?t.touches[0]:e;ghostPos.x=t.clientX-offset.x;ghostPos.y=t.clientY-offset.y;}
ghost.addEventListener('mousedown',startDrag);
ghost.addEventListener('touchstart',startDrag);
window.addEventListener('mouseup',stopDrag);
window.addEventListener('touchend',stopDrag);
window.addEventListener('mousemove',moveGhost);
window.addEventListener('touchmove',moveGhost);

// Element creation
function createElement(type,imgUrl,count=5,size=50){
  const arr=[];
  for(let i=0;i<count;i++){
    const el=document.createElement('div');el.className=type;el.style.backgroundImage=`url('${imgUrl}')`;
    el.style.width=size+'px';el.style.height=size+'px';
    el.style.left=Math.random()*window.innerWidth+'px';el.style.top=Math.random()*window.innerHeight+'px';
    canvas.appendChild(el);arr.push(el);
    if(type==='mushroom'){el.addEventListener('touchstart',()=>el.style.transform='scale(1.2)');el.addEventListener('touchend',()=>el.style.transform='scale(1)');}
    if(type==='creature'){el.addEventListener('touchstart',()=>{el.style.transform='scale(1.3) rotate(10deg)';setTimeout(()=>el.style.transform='scale(1) rotate(0deg)',300);});}
  }return arr;
}

// Elements
const mushrooms=createElement('mushroom','images/mushroom.png',15,60);
const flowers=createElement('flower','images/flower.png',10,40);
const butterflies=createElement('creature','images/butterfly.png',8,40);
const snails=createElement('obstacle','images/snail.png',4,30);
const leaves=createElement('leaf','images/leaf.png',8,20);
const collectibles=[];
for(let i=0;i<10;i++){
  const c=document.createElement('div');c.className='collectible';
  c.style.backgroundImage="url('images/firefly.png')";
  c.style.left=Math.random()*window.innerWidth+'px';
  c.style.top=Math.random()*window.innerHeight+'px';
  canvas.appendChild(c);collectibles.push(c);
}

// Particles
let particles=[];
for(let i=0;i<60;i++){
  const p=document.createElement('div');p.className='particle';
  p.style.left=Math.random()*window.innerWidth+'px';
  p.style.top=Math.random()*window.innerHeight+'px';
  p.style.opacity=Math.random()*0.6+0.3;
  canvas.appendChild(p);
  particles.push({el:p,speed:Math.random()*0.5+0.2,delta:Math.random()*0.05});
}

// Spider webs
const webs=[];
for(let i=0;i<6;i++){
  const w=document.createElement('div');w.className='web';
  w.style.backgroundImage="url('images/web.png')";
  w.style.left=Math.random()*window.innerWidth+'px';
  w.style.top=Math.random()*window.innerHeight+'px';
  canvas.appendChild(w);webs.push(w);
}

// Fog / mist
const fogs=[];
for(let i=0;i<5;i++){
  const f=document.createElement('div');f.className='fog';
  f.style.left=Math.random()*window.innerWidth+'px';
  f.style.top=Math.random()*window.innerHeight+'px';
  f.style.width=100+Math.random()*50+'px';
  f.style.height=50+Math.random()*30+'px';
  canvas.appendChild(f);fogs.push({el:f,speed:0.05+Math.random()*0.05});
}

// Collision
function checkCollision(a,b){
  const aR=a.getBoundingClientRect();const bR=b.getBoundingClientRect();
  return !(aR.right<bR.left || aR.left>bR.right || aR.bottom<bR.top || aR.top>bR.bottom);
}

// Animate loop
function animate(){
  time+=1;
  let bgY=parseFloat(getComputedStyle(canvas).backgroundPositionY)||0;
  bgY+=0.3;canvas.style.backgroundPositionY=bgY+'px';
  
  const colorShift=Math.sin(time/1000)*30;
  canvas.style.backgroundColor=`rgb(${10+colorShift}, ${26+colorShift}, ${30+colorShift})`;

  ghost.style.top=ghostPos.y+Math.sin(Date.now()/500)/5+'px';
  ghost.style.left=ghostPos.x+Math.sin(Date.now()/700)/5+'px';

  butterflies.forEach((c,i)=>{
    let x=parseFloat(c.style.left);x+=0.3+Math.random()*0.2;if(x>window.innerWidth)x=-50;
    c.style.left=x+'px';c.style.top=parseFloat(c.style.top)+Math.sin(Date.now()/500+i)/2+'px';
    c.style.transform=`rotate(${Math.sin(Date.now()/500+i)*10}deg)`;
  });

  snails.forEach(s=>{
    let x=parseFloat(s.style.left);x+=0.1;if(x>window.innerWidth)x=-40;
    s.style.left=x+'px';
    if(checkCollision(ghost,s)){ghostPos.x-=20;ghostPos.y-=20;}
  });

  leaves.forEach(l=>{
    let x=parseFloat(l.style.left);let y=parseFloat(l.style.top);
    x-=(0.2+Math.random()*0.15);y+=Math.sin(Date.now()/400+Math.random())/2;
    if(y>window.innerHeight)y=-20;if(x<-20)x=window.innerWidth+20;
    l.style.left=x+'px';l.style.top=y+'px';
    l.style.transform=`rotate(${Math.sin(Date.now()/300+Math.random())*15}deg)`;
  });

  particles.forEach(p=>{
    let y=parseFloat(p.el.style.top);y-=p.speed;p.el.style.top=y+'px';
    p.el.style.opacity=0.4+Math.abs(Math.sin(Date.now()*p.delta))/2;
    if(y<0)y=window.innerHeight;p.el.style.top=y+'px';
  });

  fogs.forEach(f=>{
    let x=parseFloat(f.el.style.left);
    x+=f.speed; if(x>window.innerWidth)x=-100;
    f.el.style.left=x+'px';
  });

  collectibles.forEach(c=>{
    if(c.style.display!=='none' && checkCollision(ghost,c)){
      c.style.display='none';score++;scoreBoard.innerText='Score: '+score;
      localStorage.setItem('forestScore',score);
    }
  });

  mushrooms.forEach((m,i)=>{
    m.style.transform='scale('+(1+0.05*Math.sin(Date.now()/800+i))+')';
    m.style.filter=`drop-shadow(0 0 ${10+5*Math.sin(Date.now()/600)}px #a0f0ff)`;
  });

  requestAnimationFrame(animate);
}
animate();

// Admin music
function adminMusicChange(){const url=prompt("Enter music URL:");if(url)bgMusic.src=url;bgMusic.play();}
musicBtn.addEventListener('click',adminMusicChange);
</script>
</body>
</html>
