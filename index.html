<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dreamy Ghost Forest</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI',sans-serif}
body{overflow:hidden;background:black}

/* SKY */
#sky{position:fixed;inset:0;transition:background 3s;z-index:-3}
.sky-day{background:linear-gradient(#b9e6ff,#e8f9ff)}
.sky-twilight{background:linear-gradient(#ffb3d9,#6c6cff)}
.sky-night{background:linear-gradient(#050b2e,#1a1a4f)}

/* FOREST */
#forest{
  position:absolute;inset:0;z-index:-2;
  background:
    radial-gradient(circle at bottom,rgba(0,255,180,.15),transparent),
    linear-gradient(to top,#0d2f2f,#144b3c);
  transition:filter 3s
}
.day{filter:brightness(1)}
.twilight{filter:brightness(.85)}
.night{filter:brightness(.6)}

/* GHOST */
#ghost{
  position:absolute;width:72px;height:72px;left:50%;top:55%;
  transform:translate(-50%,-50%);
  background:radial-gradient(circle at 50% 35%,#fff 35%,#ffd6ff 36%,#ffd6ff 55%,transparent 56%),
             radial-gradient(circle at 40% 40%,#000 3%,transparent 4%),
             radial-gradient(circle at 60% 40%,#000 3%,transparent 4%);
  border-radius:50% 50% 45% 45%;
  filter:drop-shadow(0 0 16px #ffd6ff);
  animation:float 2s ease-in-out infinite alternate
}
@keyframes float{from{transform:translate(-50%,-50%) translateY(0)}to{transform:translate(-50%,-50%) translateY(-10px)}}

/* EYES (blink) */
.blink{
  background:
    radial-gradient(circle at 50% 35%,#fff 35%,#ffd6ff 36%,#ffd6ff 55%,transparent 56%),
    linear-gradient(#000,#000);
}
.happy{filter:drop-shadow(0 0 18px #ffccff)}
.excited{filter:drop-shadow(0 0 26px #ffffff)}
.sleepy{opacity:.85}

/* WHISPERS */
#whisper{
  position:fixed;bottom:90px;width:100%;
  text-align:center;color:white;opacity:0;
  font-size:14px;transition:opacity 2s
}

/* CONTROLS */
#controls{
  position:fixed;bottom:18px;width:100%;
  display:flex;justify-content:center;gap:14px
}
.btn{
  background:rgba(255,255,255,.25);backdrop-filter:blur(10px);
  border-radius:18px;padding:12px 18px;color:white;
  font-size:14px;border:none
}

/* NAME */
#nameScreen{
  position:fixed;inset:0;background:rgba(0,0,0,.6);
  display:flex;align-items:center;justify-content:center;z-index:10
}
.nameBox{
  background:rgba(255,255,255,.2);padding:25px;border-radius:24px;
  text-align:center;color:white;backdrop-filter:blur(15px)
}
input{padding:10px;border-radius:14px;border:none;margin-top:10px}

/* MUSHROOMS */
.mushroom{
  position:absolute;width:28px;height:28px;border-radius:50%;
  background:radial-gradient(circle,#ff9ad5 30%,#ff4fa3 60%,#b3005a 61%);
  box-shadow:0 0 10px rgba(255,180,230,.8)
}
.mushroom.glow{box-shadow:0 0 18px #fff}

/* ENDING */
#ending{
  position:fixed;inset:0;background:rgba(255,180,230,.25);
  display:none;align-items:center;justify-content:center;z-index:20
}
.endingBox{
  background:rgba(255,255,255,.2);padding:30px;border-radius:30px;
  text-align:center;color:white;backdrop-filter:blur(15px)
}
.restart{
  margin-top:18px;padding:10px 16px;border:none;border-radius:18px;
  background:rgba(255,255,255,.3);color:white;font-size:14px
}
</style>
</head>

<body>

<div id="sky" class="sky-day"></div>
<div id="forest" class="day"></div>

<div id="ghost" class="happy"></div>
<div id="whisper"></div>

<div id="controls">
  <button class="btn" onclick="move(-30,0)">‚óÄ</button>
  <button class="btn" onclick="move(0,-30)">‚ñ≤</button>
  <button class="btn" onclick="move(0,30)">‚ñº</button>
  <button class="btn" onclick="move(30,0)">‚ñ∂</button>
</div>

<div id="nameScreen">
  <div class="nameBox">
    <h3>Name your ghost üëª</h3>
    <input id="ghostName" placeholder="Soft name...">
    <br><br>
    <button class="btn" onclick="startGame()">Start wandering ‚ú®</button>
  </div>
</div>

<div id="ending">
  <div class="endingBox">
    <h3>The forest feels warm üå∏</h3>
    <p id="endText"></p>
    <button class="restart" onclick="location.reload()">Wander again?</button>
  </div>
</div>

<script>
/* STATE */
const ghost=document.getElementById("ghost");
const whisper=document.getElementById("whisper");
const sky=document.getElementById("sky");
const forest=document.getElementById("forest");
let name="", started=false;

/* TIME */
const timeStates=["day","twilight","night"];
const skyStates=["sky-day","sky-twilight","sky-night"];
let t=0;
setInterval(()=>{
  t=(t+1)%3; forest.className=timeStates[t]; sky.className=skyStates[t];
},20000);

/* MOVE */
function move(x,y){
  ghost.style.left=(ghost.offsetLeft+x)+"px";
  ghost.style.top=(ghost.offsetTop+y)+"px";
  ghost.className="excited"; playStep();
  setTimeout(()=>ghost.className="happy",350);
}

/* BLINK */
setInterval(()=>{
  ghost.classList.add("blink");
  setTimeout(()=>ghost.classList.remove("blink"),120);
},3500);

/* WHISPERS */
const whispers=[
  "The moss hums softly‚Ä¶","Tiny spores glow around you‚Ä¶",
  "The forest remembers you‚Ä¶","This place feels safe‚Ä¶"
];
setInterval(()=>{
  if(!started) return;
  whisper.innerText=whispers[Math.floor(Math.random()*whispers.length)];
  whisper.style.opacity=1; setTimeout(()=>whisper.style.opacity=0,4000);
},8000);

/* MUSHROOMS */
for(let i=0;i<10;i++){
  const m=document.createElement("div");
  m.className="mushroom";
  m.style.left=Math.random()*innerWidth+"px";
  m.style.top=(innerHeight*0.6+Math.random()*innerHeight*0.3)+"px";
  m.onclick=()=>{m.classList.add("glow"); playPlink();
    setTimeout(()=>m.classList.remove("glow"),600)};
  document.body.appendChild(m);
}

/* AUDIO (Web Audio ‚Äì gentle) */
let ctx;
function audio(){ if(!ctx) ctx=new (window.AudioContext||window.webkitAudioContext)(); return ctx; }
function tone(freq,dur,vol=0.04){
  const c=audio(); const o=c.createOscillator(); const g=c.createGain();
  o.frequency.value=freq; o.type="sine"; g.gain.value=vol;
  o.connect(g); g.connect(c.destination); o.start();
  setTimeout(()=>o.stop(),dur);
}
function playPlink(){ tone(880,120,0.05) }
function playStep(){ tone(440,80,0.03) }

/* START + END */
function startGame(){
  name=document.getElementById("ghostName").value||"Little Ghost";
  document.getElementById("nameScreen").style.display="none";
  started=true; tone(523,300,0.04);
  setTimeout(()=>{
    document.getElementById("ending").style.display="flex";
    document.getElementById("endText").innerText=
      name+" curls up near the glowing tree.\n‚ÄúLet‚Äôs rest here for a while‚Ä¶‚Äù";
  },60000);
}
</script>

</body>
</html>
